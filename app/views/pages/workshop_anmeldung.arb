render "/pages/editable_content"

if notice == "ok"
  para "Vielen Dank für Ihre Anmeldung."
else

  unless defined? registration 
    registration = Registration.new
  end

  # retrieve events of type workshop that start today or in the future
  workshops = Event.joins(:type, :event_details).where('event_types.id = 2 AND event_details.start_date >= ?', Date.today)
  workshops = workshops.sort_by { |w| w.start_date }

  form_for registration do |f|
  
    f.label :workshop_id_1, "Workshop 1"
    f.collection_select :workshop_id_1, workshops, :id, :workshop_select, :prompt => "Bitte auswählen"
    br
    
    f.label :workshop_id_2, "Workshop 2"
    f.collection_select :workshop_id_2, workshops, :id, :workshop_select, :prompt => "Bitte auswählen"
    br
    
    f.label :workshop_id_3, "Workshop 3"
    f.collection_select :workshop_id_3, workshops, :id, :workshop_select, :prompt => "Bitte auswählen"
    br
    
    f.label :workshop_id_4, "Workshop 4"
    f.collection_select :workshop_id_4, workshops, :id, :workshop_select, :prompt => "Bitte auswählen"
  
    br
  
    f.label :prename
    f.text_field :prename, :required => true

    f.label :surname
    f.text_field :surname, :required => true

    f.label :street
    f.text_field :street, :required => true
  
    f.label :city
    f.text_field :city, :required => true
  
    f.label :zip
    f.text_field :zip, :required => true
  
    f.label :phone
    f.text_field :phone
  
    f.label :email
    f.text_field :email, :type => "email", :required => true
  
    f.check_box :professional
    f.label :professional
  
    br
  
    f.radio_button :membership_status, 0, :checked => true
    f.label :membership_status, 'kein Mitglied'

    f.radio_button :membership_status, 1
    f.label :membership_status, 'Mitglied'
    
    br
  
    f.label :workshop_info
    f.radio_button :workshop_info, 1
    f.label :workshop_info, 'post'

    f.radio_button :workshop_info, 2
    f.label :workshop_info, 'email'

    f.radio_button :workshop_info, 0, :checked => true
    f.label :workshop_info, 'none'
    
    br

    f.label :course_program
    f.radio_button :course_program, 1
    f.label :course_program, 'post'

    f.radio_button :course_program, 2
    f.label :course_program, 'email'

    f.radio_button :course_program, 0, :checked => true
    f.label :course_program, 'none'
    
    br

    f.label :event_program
    f.radio_button :event_program, 1
    f.label :event_program, 'post'

    f.radio_button :event_program, 2
    f.label :event_program, 'email'

    f.radio_button :event_program, 0, :checked => true
    f.label :event_program, 'none'
    
    br
  
    f.check_box :accept_terms, :required => true
    f.label :accept_terms

    br
   
    f.label :note
    br
    f.text_area :note, size: "60x12"
    br

    f.submit "Anmelden"
    #todo javascript verification
  end

end