#local variable people

people.each do |person|
  div :class => "row teachers teacher", :id => ("_" + person.id.to_s) do
    div :class => "basic" do
      if person.bio
        div :class => "description open-close open-trigger overflown-base" do
          div person.bio.html_safe, :class => "bio is-overflown open-toggle-height"
          div :class => "if-overflown" do
            div t(:more) + " >", :class => "more"
            div t(:close), :class => "close-trigger"
          end
        end
      else
        div :class => "description empty-description" do
          div :class => "bio"
        end
      end
    end
    div :class => "details" do
      div :class => "row" do
        div :class => "image-container" do
          img :src => person.images.first.attachment.url(:people_hires) if person.images.exists?
        end
        div :class => "info" do
          h3 person.name
          para :class => "classes" do # TODO: account for ppl both teachers and artists
            if person.events.none? { |e| [3, 4, 5, 6].include?e.type.id }
              person.events.map { |e| link_to(e.title, event_path(e)) }.join('<br>').html_safe
            else
              person.events.uniq_by {|e| e.title}. map { |e| e.title }.join('<br>').html_safe
            end
          end
          a "Person bearbeiten", :href => edit_admin_person_path(person), :class => "admin-only classes" if admin_user_signed_in?
        end
      end
    end
  end
end
